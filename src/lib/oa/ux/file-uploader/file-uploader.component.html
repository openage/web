<!-- eslint-disable @angular-eslint/template/alt-text -->
<!-- eslint-disable @angular-eslint/template/label-has-associated-control -->
<processing-indicator *ngIf="isProcessing"></processing-indicator>
<div>
  <h2 class="centerAlign">Import from Excel File</h2>
  <div class="file">
    <div class="fileSection">
      <div class="removePad" *ngIf="file">
        <div class="controls-row">
          <div class="controls-row">
            <div><span class="material-icons icon-color">attach_file</span></div>
            <div class="chooseText">{{file.name}}</div>
          </div>
          <div class="spacer"></div>
        </div>
        <hr class="divider">
      </div>
    </div>
    <oa-icon-file-picker [view]="'layout'" [accept]="accept" (change)="onFileSelect($event)">
      <div class="controls-row">
        <div class="spacer"></div>
        <oa-icon value="upload"></oa-icon>
        <div class="spacer"></div>
      </div>
      <div class="controls-row">
        <div class="spacer"></div>
        <!-- <p class="textHeader"></p> -->
        <div class="spacer"></div>
      </div>
      <div class="controls-row">
        <div class="spacer"></div>
        <p class="Or"></p>
        <div class="spacer"></div>
      </div>
      <div class="controls-row">
        <div class="spacer"></div>
        <!-- <input type="file" class="form-control" (change)="onFileSelect($event)"> -->
        <button class="select btn" (change)="onFileSelect($event)">Click to Browse</button>
        <div class="spacer"></div>
      </div>
      <!-- <label>File</label> -->
    </oa-icon-file-picker>

  </div>
  @if (mappers && mappers.length) {
  <div class="mappers">
    <label>Format/Mapper</label>
    <div>

      <select [ngModel]="selectedMapper" (change)=" ($event)">
        <option *ngFor="let option of mappers" [value]="option.value">
          {{ option.name }}
        </option>
      </select>
    </div>
  </div>
  }
  @if (samples && samples.length) {
  <div>
    <!-- <label class="fileFormat">File Format Samples</label> -->
    @for (sample of samples; track sample) {
    <div class="sample">
      <a [href]="sample.url" target="_blank ">{{sample.name}}</a>
    </div>
    }
  </div>
  }
  @if (errorMessage) {
  <div class="error">
    <label>Error</label>
    <p>
      {{errorMessage}}
    </p>
  </div>
  }
  @if(showSuccessDialog){
  <div class="dialog-overlay">
    <div class="dialog-box">
      <h2>Success</h2>
      <p>{{ successMessage }}</p>
      <button (click)="closeDialog()">Close</button>
    </div>
  </div>
  }
  <div class="button-container">
    <button mat-raised-button color="primary" class="btn" [disabled]="isDisabled" (click)="onUpload()"> Upload
    </button>
  </div>
</div>